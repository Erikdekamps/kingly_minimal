// -----------------------------------------------------------------------------
// Accordion Item Component Styles
// -----------------------------------------------------------------------------
[data-component-id='kingly_minimal:accordion-item'] {
  // --- Tier 3: Component-Scoped Design Tokens ---
  --accordion-item-border-color: #e1e1e1;
  --accordion-item-header-bg-hover: #f4f5f6;
  --accordion-item-focus-ring-color: #004a94;
  --accordion-item-border-width: 1px;
  --accordion-item-border-radius: 0.25rem;
  --accordion-item-header-padding-y: 0.5rem;
  --accordion-item-header-padding-x: 1rem;
  --accordion-item-header-gap: 1rem;
  --accordion-item-header-font-weight: 600;
  --accordion-item-focus-ring-width: 2px;
  --accordion-item-focus-ring-offset: 2px;
  --accordion-item-content-animation-duration: 0.3s;
  --accordion-item-content-padding: 1rem;
  --accordion-item-icon-animation-duration: 0.3s;
  --_transition-timing-function: ease-in-out; // Internal use

  // The root <details> element.
  border: var(--accordion-item-border-width) solid var(--accordion-item-border-color);
  border-radius: var(--accordion-item-border-radius);
  transition: background-color var(--accordion-item-content-animation-duration) var(--_transition-timing-function);

  // The <summary> element that acts as the controller.
  .accordion-item__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--accordion-item-header-gap);
    padding: var(--accordion-item-header-padding-y) var(--accordion-item-header-padding-x);
    font-weight: var(--accordion-item-header-font-weight);
    cursor: pointer;
    list-style: none; // Remove the default browser marker.

    // Remove the default outline on WebKit browsers.
    &::-webkit-details-marker {
      display: none;
    }

    &:hover {
      background-color: var(--accordion-item-header-bg-hover);
    }

    // WCAG 2.4.7: Ensure a clear focus state.
    &:focus-visible {
      outline: var(--accordion-item-focus-ring-width) solid var(--accordion-item-focus-ring-color);
      outline-offset: var(--accordion-item-focus-ring-offset);
      z-index: 1; // Ensure outline is not clipped by adjacent items.
    }
  }

  // The content wrapper div, configured for animation.
  .accordion-item__content {
    display: grid;
    // Set the initial (closed) state.
    grid-template-rows: 0fr;
    // Define the transition for the grid rows.
    transition: grid-template-rows var(--accordion-item-content-animation-duration) var(--_transition-timing-function);
  }

  // The inner wrapper is required for the animation to work correctly.
  .accordion-item__content-inner {
    // The padding is moved here so it animates with the content.
    padding: var(--accordion-item-content-padding);
    // This allows the element's height to shrink to zero.
    overflow: hidden;
    min-height: 0;
  }

  // The custom icon wrapper.
  .accordion-item__icon {
    display: inline-flex;
    transition: transform var(--accordion-item-icon-animation-duration) var(--_transition-timing-function);
  }

  // State change when the <details> element is open.
  &[open] {
    > .accordion-item__header {
      // Add a border between the header and content when open.
      border-bottom: var(--accordion-item-border-width) solid var(--accordion-item-border-color);

      .accordion-item__icon {
        transform: rotate(180deg);
      }
    }

    // When open, transition the grid rows to reveal the content.
    .accordion-item__content {
      grid-template-rows: 1fr;
    }
  }

  // Respect user preference for reduced motion.
  @media (prefers-reduced-motion: reduce) {
    .accordion-item__icon,
    .accordion-item__content {
      transition: none;
    }
  }
}

// --- Dark Mode Overrides ---
html[data-theme="dark"] [data-component-id='kingly_minimal:accordion-item'] {
  --accordion-item-border-color: #333333;
  --accordion-item-header-bg-hover: #1e1e1e;
  --accordion-item-focus-ring-color: #74c0fc;
}
