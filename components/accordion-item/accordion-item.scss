// themes/custom/kingly_minimal/components/accordion-item/accordion-item.scss

// -----------------------------------------------------------------------------
// Accordion Item Component Styles
// -----------------------------------------------------------------------------
[data-component-id='kingly_minimal:accordion-item'] {
  // The root <details> element.
  border: var(--border-width-thin) solid var(--color-border);
  border-radius: var(--border-radius);
  transition: background-color var(--transition-duration-fast) var(--transition-timing-function);

  // The <summary> element that acts as the controller.
  .accordion-item__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    list-style: none; // Remove the default browser marker.

    // Remove the default outline on WebKit browsers.
    &::-webkit-details-marker {
      display: none;
    }

    &:hover {
      background-color: var(--color-light-gray);
    }
  }

  // The content wrapper div, configured for animation.
  .accordion-item__content {
    display: grid;
    // Set the initial (closed) state.
    grid-template-rows: 0fr;
    // Define the transition for the grid rows.
    transition: grid-template-rows var(--transition-duration-slow) ease-in-out;
  }

  // The inner wrapper is required for the animation to work correctly.
  .accordion-item__content-inner {
    // The padding is moved here so it animates with the content.
    padding: var(--spacing-md);
    // This allows the element's height to shrink to zero.
    overflow: hidden;
    min-height: 0;
  }

  // The custom icon wrapper.
  .accordion-item__icon {
    display: inline-flex;
    transition: transform var(--transition-duration-slow) ease-in-out;
  }

  // State change when the <details> element is open.
  &[open] {
    > .accordion-item__header {
      // Add a border between the header and content when open.
      border-bottom: var(--border-width-thin) solid var(--color-border);

      .accordion-item__icon {
        transform: rotate(180deg);
      }
    }

    // When open, transition the grid rows to reveal the content.
    .accordion-item__content {
      grid-template-rows: 1fr;
    }
  }

  // WCAG: Respect user preference for reduced motion.
  @media (prefers-reduced-motion: reduce) {
    .accordion-item__icon,
    .accordion-item__content {
      transition: none;
    }
  }
}
