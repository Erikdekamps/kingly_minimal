// kingly_minimal/components/card/card.scss

@use '../../scss/base/mixins' as *;

// -----------------------------------------------------------------------------
// Card Component Styles
// -----------------------------------------------------------------------------
[data-component-id='kingly_minimal:card'] {
  // --- Base Card Styles ---
  display: block;
  text-decoration: none;
  color: inherit;
  background-color: var(--color-background);
  border: var(--border-width-thin) solid var(--color-border);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  overflow: hidden;
  height: 100%;

  // Add a transition only for the button's background color on hover.
  // The transition is placed on the child to be more performant.
  .card__cta {
    transition: background-color var(--transition-duration-medium) var(--transition-timing-function);
  }

  // --- Hover & Focus States ---
  // The primary hover effect is now on the CTA button.
  &:hover .card__cta {
    background-color: var(--color-primary-hover);
  }

  // A clear focus state is crucial for accessibility.
  &:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
  }

  // --- Layout ---
  .card__wrapper {
    display: grid;
    height: 100%;
  }

  // Vertical variant: Image is stacked on top of the content.
  &.card--vertical .card__wrapper {
    grid-template-rows: auto 1fr; // Image | Main-and-CTA wrapper
  }

  // Horizontal variant: Stacks on mobile.
  &.card--horizontal .card__wrapper {
    grid-template-rows: auto 1fr; // Image | Main-and-CTA wrapper
  }

  // On medium screens, the horizontal variant switches to a 2-column layout.
  @include media-query(md) {
    &.card--horizontal .card__wrapper {
      grid-template-rows: 1fr; // Reset rows.
      grid-template-columns: 1fr 1.5fr; // Image | Main-and-CTA wrapper

      .card__image {
        height: 100%;

        img, picture {
          height: 100%;
          object-fit: cover;
        }
      }
    }
  }

  // This container holds all text content and the CTA button.
  // Using grid here robustly pushes the CTA to the bottom.
  .card__main-and-cta {
    display: grid;
    grid-template-rows: 1fr auto; // Main content (fills space) | CTA (takes its own space)
    padding: var(--spacing-md);
    gap: var(--spacing-md);
  }

  .card__main {
    display: grid;
    gap: var(--spacing-sm);
    align-content: start; // Align title and body to the top.
  }

  .card__title {
    font-family: var(--font-family-heading);
    font-size: var(--font-size-h4);
    line-height: var(--line-height-heading);
    font-weight: var(--font-weight-bold);
    margin: 0;
  }

  // --- Call-to-Action (CTA) Button ---
  .card__cta {
    display: block;
    padding: var(--spacing-sm) var(--spacing-md);
    background-color: var(--color-primary);
    color: var(--color-background);
    border-radius: var(--border-radius);
    text-align: center;
    font-weight: var(--font-weight-semibold);
    text-decoration: none; // Remove underline, as it's now a button.
  }
}
