// -----------------------------------------------------------------------------
// Details Component Styles
// -----------------------------------------------------------------------------

// Scope all styles to the details component.
[data-component-id='kingly_minimal:details'] {
  border: var(--border-width-thin) solid var(--color-border);
  border-radius: var(--border-radius);
  // Add margin for spacing when details elements are stacked in a form.
  &:not(:last-child) {
    margin-bottom: var(--spacing-md);
  }

  // The <summary> element that acts as the controller.
  .details__summary {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    list-style: none; // Remove the default browser marker.
    background-color: var(--color-light-gray);

    // Remove the default outline on WebKit browsers.
    &::-webkit-details-marker {
      display: none;
    }

    // Give the summary a clear focus state.
    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring-color);
      outline-offset: var(--focus-ring-offset);
      z-index: 1;
    }
  }

  // The text of the summary.
  .details__summary-text {
    flex-grow: 1; // Allow the text to take up available space.
  }

  // The custom marker (our SVG icon).
  .details__marker {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform var(--transition-duration-medium) var(--transition-timing-function);
    transform-origin: center;

    svg {
      width: 20px;
      height: 20px;
    }
  }

  // The content area inside the details element.
  .details__content {
    padding: var(--spacing-md);
    border-top: var(--border-width-thin) solid var(--color-border);
  }

  // State changes when the <details> element is open.
  &[open] {
    > .details__summary {
      .details__marker {
        transform: rotate(180deg);
      }
    }
  }

  // Error state for forms (class added by form-element bridge).
  &.form-item--error > .details__summary {
    background-color: var(--color-error);
    border-color: var(--color-error-border);
    color: var(--color-error-text);
  }

  // Required marker for forms.
  .required-marker {
    color: var(--color-error-text);
    font-weight: var(--font-weight-bold);
  }

  // Respect user preference for reduced motion.
  @media (prefers-reduced-motion: reduce) {
    .details__marker {
      transition: none;
    }
  }
}
