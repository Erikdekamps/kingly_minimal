// kingly_minimal/components/local-tasks/local-tasks.scss

// -----------------------------------------------------------------------------
// Local Tasks (Tabs) Component Styles
// This is a more conventional tab style with a prominent bottom border indicating the active tab.
// -----------------------------------------------------------------------------

// The data-component-id is on the outer .local-tasks wrapper.
[data-component-id='kingly_minimal:local-tasks'] {
  // Add space between primary and secondary tab groups if both are present.
  > * + * {
    margin-top: var(--spacing-sm);
  }

  // --- List Styling ---
  // Targets both primary and secondary <ul> elements.
  .local-tasks__list {
    display: flex;
    flex-wrap: wrap; // Allow tabs to wrap on small screens if needed.
    list-style: none;
    margin: 0;
    padding: 0;
    // The bottom border on the container creates the "track" that the tabs sit on.
    border-bottom: var(--border-width) solid var(--color-border);
  }

  // --- Link (Tab) Styling ---
  // We now target the .tabs__link class directly, which our new
  // menu-local-task.html.twig template provides on the <a> tag.
  .tabs__link {
    display: block;
    padding: var(--spacing-sm) var(--spacing-md);
    // The negative margin makes the tab's active border align perfectly over the container's border line.
    margin-bottom: calc(-1 * var(--border-width));
    // Reserve 2px of space for the active/hover border to prevent layout shifts.
    border-bottom: 2px solid transparent;
    text-decoration: none;
    color: var(--color-text);
    font-weight: var(--font-weight-medium);
    transition: border-color var(--transition-duration) var(--transition-timing-function),
    color var(--transition-duration) var(--transition-timing-function);

    &:hover {
      color: var(--color-primary);
    }

    // High-visibility focus state for WCAG AAA.
    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring-color);
      outline-offset: var(--focus-ring-offset);
      border-radius: var(--border-radius); // Give the outline a nice shape.
      z-index: 1; // Ensure the outline is not clipped by other tabs.
    }
  }

  // --- Active Tab Styling ---
  // **CORRECTION:** The .is-active class is on the <a> tag itself, so we
  // chain the selectors: .tabs__link.is-active
  .tabs__link.is-active {
    color: var(--color-primary);
    font-weight: var(--font-weight-semibold);
    border-bottom-color: var(--color-primary);
  }

  // --- Secondary Tabs ---
  // Make the secondary tabs slightly smaller to de-emphasize them.
  .local-tasks__list--secondary {
    .tabs__link {
      font-size: var(--font-size-sm);
      padding: var(--spacing-xs) var(--spacing-sm);
    }
  }
}
