{#
/**
 * @file
 * Component template for the main navigation menu.
 *
 * This component provides a semantic <nav> element and improves accessibility
 * by using the block's label as an ARIA label. It renders the `content` variable,
 * which contains the output of the `kingly_minimal:menu` component.
 *
 * @see kingly_minimal/components/main-menu/main-menu.component.yml
 *
 * @props
 * - label: (String) The accessible label for the navigation.
 * - content: (Object) The render array for the menu tree.
 * - attributes: (Object) HTML attributes for the root <nav> wrapper.
 */
#}
{% set heading_id = attributes.id ~ '-label' %}
{% set nav_attributes = create_attribute() %}

{% if label %}
  {% do nav_attributes.setAttribute('aria-labelledby', heading_id) %}
{% else %}
  {% do nav_attributes.setAttribute('aria-label', 'Main navigation'|t) %}
{% endif %}

<nav {{ attributes.merge(nav_attributes) }} role="navigation">
  {{ title_prefix }}
  {% if label %}
    {#
    Use the heading component for the visually hidden heading.
    Pass the title_attributes to it, ensuring Drupal can add classes like 'visually-hidden'.
    Set its ID so `aria-labelledby` works correctly.
    #}
    {{ include('kingly_minimal:heading', {
      text: label,
      level: 'h2',
      attributes: title_attributes.addClass('visually-hidden').setAttribute('id', heading_id)
    }, with_context = false) }}
  {% endif %}
  {{ title_suffix }}

  {% block content %}
    {{ content }}
  {% endblock %}
</nav>
