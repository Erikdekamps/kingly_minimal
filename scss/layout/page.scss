// kingly_minimal/scss/layout/page.scss

// This is an entry point file. It will be compiled by Vite.

// This includes the reset styles in our compiled CSS.
@use '../base/reset';

// -----------------------------------------------------------------------------
// Main Page Layout
// -----------------------------------------------------------------------------

.layout-container {
  display: grid;
  grid-template-rows: auto 1fr auto;
  min-height: 100vh;
  // The outer columns are now just gutters. The main content column will have
  // its own internal padding.
  grid-template-columns: 1fr minmax(0, var(--container-max-width)) 1fr;
  gap: var(--spacing-md);
}

// All direct children of the layout container are placed in the center column.
.layout-container > * {
  grid-column: 2;
  min-width: 0;
}

// We specifically override the footer to make it span all columns for full-bleed backgrounds.
.page-footer {
  grid-column: 1 / -1;
}

// Apply consistent inline padding to the main page sections.
.page-header,
.main-content {
  padding-inline: var(--container-padding);
}

// Styles for the main content wrapper.
.main-content {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: var(--spacing-md);
  align-content: start;

  > * {
    grid-column: 1 / -1;
  }
}

// -----------------------------------------------------------------------------
// Admin Toolbar Integration
// This section handles adjustments needed when the Gin admin theme is active.
// -----------------------------------------------------------------------------

// When the Gin horizontal toolbar is present, we adjust the layout's min-height
// to prevent an unnecessary scrollbar.
body.gin--horizontal-toolbar .layout-container {
  // We calculate the available viewport height by subtracting the heights of
  // the Gin toolbars from 100vh. We provide a 0px fallback for safety.
  min-height: calc(100vh - var(--gin-toolbar-height, 0px) - var(--gin-toolbar-secondary-height, 0px));
}

// -----------------------------------------------------------------------------
// Base Typography & Page Title
// -----------------------------------------------------------------------------

.page-title {
  font-family: var(--font-family-heading);
  line-height: var(--line-height-heading);
  font-size: 2rem;
  margin-bottom: 0;
}

// -----------------------------------------------------------------------------
// Responsive Adjustments
// -----------------------------------------------------------------------------

@media (min-width: 768px) { // md breakpoint
  // On larger screens, we redefine the --container-padding variable to a larger value.
  // This single change will affect the header, main content, and footer inner wrapper.
  :root {
    --container-padding: var(--spacing-lg); // e.g., 32px
  }

  .layout-container {
    gap: var(--spacing-lg);
    // The side gutters now have a minimum size.
    grid-template-columns: minmax(var(--spacing-lg), 1fr) minmax(0, var(--container-max-width)) minmax(var(--spacing-lg), 1fr);
  }

  .main-content {
    gap: var(--spacing-lg);
  }

  .page-title {
    font-size: 2.5rem;
  }
}
